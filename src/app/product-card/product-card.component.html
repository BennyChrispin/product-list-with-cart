<div class="duration-300">
  <img
    [src]="product.image.thumbnail"
    [srcset]="
      product.image.mobile +
      ' 600w, ' +
      product.image.tablet +
      ' 900w, ' +
      product.image.desktop +
      ' 1200w'
    "
    [ngClass]="{ 'border-2 border-[#C73B0F]': isInCart }"
    sizes="(max-width: 600px) 100vw, (max-width: 900px) 50vw, 33vw"
    alt="{{ product.name }}"
    class="w-full h-auto rounded-3xl mb-4 sm:mb-6 md:mb-8"
  />
  <div class="relative flex justify-center mb-2">
    <ng-container *ngIf="!isInCart; else quantityControls">
      <button
        type="submit"
        (click)="addToCart()"
        class="absolute bottom-0 md:bottom-2 bg-[#fbf7f5] rounded-full border-2 border-[#AD8A85] flex items-center gap-2 px-4 py-2 text-xs sm:text-sm md:text-base lg:text-lg"
      >
        <img
          src="../../assets/images/icon-add-to-cart.svg"
          alt="Add Cart Icon"
          class="w-4 h-4 md:w-5 md:h-5 lg:w-6 lg:h-6"
        />
        <p
          class="text-[#260F08] font-semibold text-xs sm:text-sm md:text-base lg:text-lg"
        >
          Add to Cart
        </p>
      </button>
    </ng-container>

    <ng-template #quantityControls>
      <div
        class="absolute bottom-0 md:bottom-2 rounded-full bg-[#C73B0F] flex items-center gap-2 px-4 py-2 text-xs sm:text-sm md:text-base lg:text-lg"
      >
        <div class="flex items-center justify-between space-x-6 w-full">
          <button
            (click)="decrementQuantity()"
            class="text-white w-6 h-6 sm:w-7 sm:h-7 flex items-center justify-center rounded-full border-2 border-white"
          >
            <img
              src="../../assets/images/icon-decrement-quantity.svg"
              alt="Decrement Quantity Icon"
              class="w-2 h-2 sm:w-3 sm:h-3"
            />
          </button>
          <span
            class="text-white font-bold text-sm sm:text-base md:text-lg lg:text-xl"
          >
            {{ quantity }}
          </span>
          <button
            (click)="incrementQuantity()"
            class="text-white w-6 h-6 sm:w-7 sm:h-7 flex items-center justify-center rounded-full border-2 border-white"
          >
            <img
              src="../../assets/images/icon-increment-quantity.svg"
              alt="Increment Quantity Icon"
              class="w-2 h-2 sm:w-3 sm:h-3"
            />
          </button>
        </div>
      </div>
    </ng-template>
  </div>
  <div class="mx-3">
    <p class="text-xs text-[#87635A] mb-1 sm:text-sm md:text-base lg:text-lg">
      {{ product.category }}
    </p>
    <h2
      class="text-xs font-semibold mb-1 text-[#260F08] sm:text-sm md:text-base lg:text-lg"
    >
      {{ product.name }}
    </h2>
    <p class="text-sm font-semibold text-[#C73B0F] lg:text-xl">
      $ {{ product.price.toFixed(2) }}
    </p>
  </div>
</div>
